var y=Object.defineProperty;var g=(a,e,i)=>e in a?y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var s=(a,e,i)=>g(a,typeof e!="symbol"?e+"":e,i);import{m as u}from"./2R3b5JQuKIu9ouzzfEUO.js";import"./DMaOWi_7BvjHR9OOcqbD.js";import"./DnUuIl_qQ9_BDdjeE4Hc.js";import{L as w}from"./85yZmE5PqfcNKC64qTgv.js";import{aI as f,aJ as l,ap as r,ao as p,an as c}from"./YuA7MKX-N8BBDZOAxa77.js";import"./BUjYG6qMQjp0KnokeClt.js";import{R as S}from"./C5o7XLF22BT4oJDhl5hA.js";import"./b9QDabEUvKe6AI27JKho.js";import{i as b}from"./BehbJKW-Ic5ZiA7tfWXx.js";import{A as v}from"./D_oLYRMj7Ly7f4IPwJOJ.js";import{C as L}from"./DUVnxKyWJJFu5nbFNSG-.js";import{a as G}from"./GzLNAtZNvVIgBFPR69zY.js";import{G as A}from"./RxhDU2roWtuUt034quX3.js";import"./Bc9msAhEH3vgaEnZmTf9.js";import"./DIx023UVSVOF_51Qoh_s.js";import{G as I}from"./xFfpkGlAU2G36zuiyHZN.js";import{M as T}from"./B4NkvrEq3HRVroJgen_T.js";import"./DR6-k2EzhO7f215dcqK4.js";import{P as k}from"./Cji9_t-JH193IAYX_3Zz.js";import{P as C}from"./6lRUPlXl78eILaROhbiM.js";import{R}from"./CNVvG0ogiXe6bos1L1vs.js";import{R as E}from"./B83XcG7BOvERRisJ8Lh8.js";import{T as F}from"./Dz7bCpNAvut0Pw-tRkNZ.js";import{U}from"./D6iVnI44rA0Q9_gX5YDl.js";import{U as P}from"./JgSJdYvSNgwqSZ9AlyTU.js";import{E as M}from"./KHMCpnUKFW88Lekk6-c_.js";var _=Object.defineProperty,j=Object.getOwnPropertyDescriptor,t=(a,e,i,d)=>{for(var n=d>1?void 0:d?j(e,i):e,h=a.length-1,m;h>=0;h--)(m=a[h])&&(n=(d?m(e,i,n):m(n))||n);return d&&n&&_(e,i,n),n};class o{constructor(){s(this,"logger",new w("AppStore"));s(this,"isGatewayReady",!1);s(this,"isAppLoading",!0);s(this,"tokenLoaded",!1);s(this,"token",null);s(this,"fpsShown",!1);s(this,"theme",new F);s(this,"account",null);s(this,"gateway",new A(this));s(this,"guilds",new I(this));s(this,"roles",new E(this));s(this,"emojis",new M(this));s(this,"channels",new L(this));s(this,"users",new P(this));s(this,"privateChannels",new C(this));s(this,"rest",new S(this));s(this,"experiments",new G);s(this,"presences",new k(this));s(this,"readStateStore",new R(this));s(this,"queue",new T(this));s(this,"updaterStore",null);s(this,"activeGuild",null);s(this,"activeGuildId","@me");s(this,"activeChannel",null);s(this,"activeChannelId");s(this,"memberListVisible",!0);b&&(this.updaterStore=new U(this)),this.toggleMemberList=this.toggleMemberList.bind(this),this.windowToggleFps=this.windowToggleFps.bind(this),window.windowToggleFps=this.windowToggleFps,f(this)}setGatewayReady(e){this.isGatewayReady=e}setAppLoading(e){this.isAppLoading=e}setUser(e){this.account=new v(e)}get isReady(){return!this.isAppLoading&&this.isGatewayReady}setActiveGuildId(e){this.activeGuildId=e,this.activeGuild=(e?this.guilds.get(e):null)??null}setActiveChannelId(e){this.activeChannelId=e,this.activeChannel=(e?this.channels.get(e):null)??null}toggleMemberList(){this.memberListVisible=!this.memberListVisible}windowToggleFps(){this.setFpsShown(!this.fpsShown)}setToken(e,i=!1){this.token=e,this.tokenLoaded=!0,i&&(l.setItem("token",e),this.logger.info("Token saved to storage"))}loadToken(){const e=l.getItem("token");this.tokenLoaded=!0,e?(this.logger.debug("Loaded token from storage."),this.setToken(e)):(this.logger.debug("No token found in storage."),this.setGatewayReady(!0))}logout(){this.token=null,this.tokenLoaded=!1,this.isAppLoading=!1,this.isGatewayReady=!0,l.clear(),u.closeAll()}setFpsShown(e){this.fpsShown=e,l.setItem("fpsShown",e)}loadFpsShown(){this.fpsShown=l.getItem("fpsShown")??!1}setUpdaterEnabled(e){var i;(i=this.updaterStore)==null||i.setEnabled(e),l.setItem("updaterEnabled",e)}loadUpdaterEnabled(){var e;(e=this.updaterStore)==null||e.setEnabled(l.getItem("updaterEnabled")??!0)}loadSettings(){this.loadFpsShown(),this.loadToken(),this.loadUpdaterEnabled()}}t([r],o.prototype,"isGatewayReady",2);t([r],o.prototype,"isAppLoading",2);t([r],o.prototype,"tokenLoaded",2);t([r],o.prototype,"token",2);t([r],o.prototype,"fpsShown",2);t([r],o.prototype,"theme",2);t([r],o.prototype,"account",2);t([r],o.prototype,"gateway",2);t([r],o.prototype,"guilds",2);t([r],o.prototype,"roles",2);t([r],o.prototype,"emojis",2);t([r],o.prototype,"channels",2);t([r],o.prototype,"users",2);t([r],o.prototype,"privateChannels",2);t([r],o.prototype,"rest",2);t([r],o.prototype,"experiments",2);t([r],o.prototype,"presences",2);t([r],o.prototype,"readStateStore",2);t([r],o.prototype,"queue",2);t([r],o.prototype,"updaterStore",2);t([r],o.prototype,"activeGuild",2);t([r],o.prototype,"activeGuildId",2);t([r],o.prototype,"activeChannel",2);t([r],o.prototype,"activeChannelId",2);t([r],o.prototype,"memberListVisible",2);t([p],o.prototype,"setGatewayReady",1);t([p],o.prototype,"setAppLoading",1);t([p],o.prototype,"setUser",1);t([c],o.prototype,"isReady",1);t([p],o.prototype,"setActiveGuildId",1);t([p],o.prototype,"setActiveChannelId",1);t([p],o.prototype,"toggleMemberList",1);t([p],o.prototype,"windowToggleFps",1);t([p],o.prototype,"setToken",1);t([p],o.prototype,"loadToken",1);t([p],o.prototype,"logout",1);t([p],o.prototype,"setFpsShown",1);t([p],o.prototype,"loadFpsShown",1);t([p],o.prototype,"setUpdaterEnabled",1);t([p],o.prototype,"loadUpdaterEnabled",1);t([p],o.prototype,"loadSettings",1);export{o as A};
