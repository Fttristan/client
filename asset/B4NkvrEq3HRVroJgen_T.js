var c=Object.defineProperty;var d=(t,e,s)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var g=(t,e,s)=>d(t,typeof e!="symbol"?e+"":e,s);import{ap as u,aI as h,ao as p,an as f}from"./YuA7MKX-N8BBDZOAxa77.js";import"./DHHhgtpjOMdQgGr8ao9W.js";import"./Bj3GVG-z3cLqjL0zb1L8.js";import"./CC5WMRh9aNqjC5F0jn7z.js";import"./D_zrOCkx60RrrErYDafh.js";import"./C209ML8Rq_9uA-wXKXZ0.js";import"./DlH2QNQoQjgrht8yWmkX.js";import{a as v,Q as l}from"./DYrM_Gkt8RaZjkTPRNi-.js";import"./qz4BddTetYdFfyodnFyA.js";import"./Y8-bfeL-ADaHJ2-vaWDg.js";import"./ChPfX-PAxRw_FvfQ9QCH.js";var _=Object.defineProperty,y=Object.getOwnPropertyDescriptor,a=(t,e,s,r)=>{for(var o=r>1?void 0:r?y(e,s):e,n=t.length-1,m;n>=0;n--)(m=t[n])&&(o=(r?m(e,s,o):m(o))||o);return r&&o&&_(e,s,o),o};class i{constructor(e){g(this,"messages");this.app=e,this.messages=u.array([]),h(this)}add(e){const s=new v(this.app,e);return this.messages.push(s),s}remove(e){const s=this.messages.find(r=>r.id===e);this.messages.remove(s)}send(e){const s=this.messages.find(r=>r.id===e);s.status=l.SENDING}get(e){return this.messages.filter(s=>s.channel_id===e)}handleIncomingMessage(e){e.nonce&&this.get(e.channel_id).find(s=>s.id===e.nonce)&&this.remove(e.nonce.toString())}}a([u],i.prototype,"messages",2);a([p],i.prototype,"add",1);a([p],i.prototype,"remove",1);a([p],i.prototype,"send",1);a([f],i.prototype,"get",1);a([p],i.prototype,"handleIncomingMessage",1);export{i as M};
